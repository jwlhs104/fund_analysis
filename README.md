# 基金風險分析與蒙地卡羅模擬

本專案針對復華華人世紀基金（基金 ID: 24）進行完整的風險評估與未來績效模擬分析。

## 專案功能

### 1. 基金數據獲取
- 透過復華基金 API 獲取歷史淨值資料
- 時間範圍：2023-03-08 至 2025-11-22
- 使用 Yahoo Finance 獲取市場基準資料（台灣加權指數 ^TWII）

### 2. 風險指標計算
計算四大核心風險指標：

| 指標 | 數值 | 說明 |
|------|------|------|
| **Sharpe Ratio (夏普值)** | 1.5649 | 衡量風險調整後報酬，數值越高表示單位風險的報酬越好 |
| **Beta (貝他值)** | 0.5547 | 相對於市場的波動性，< 1 表示波動較市場小 |
| **Max Drawdown (最大回撤)** | -20.54% | 歷史最大跌幅，評估最壞情況下的損失 |
| **Sortino Ratio (索提諾)** | 2.1578 | 僅考慮下行風險的報酬比，數值越高越好 |

### 3. 蒙地卡羅模擬
使用幾何布朗運動 (Geometric Brownian Motion) 進行未來績效模擬：

#### 模擬參數
- **模擬次數**：10,000 次
- **模擬期間**：252 交易日（約 1 年）
- **起始淨值**：42.4300
- **歷史日均報酬率**：基於過去數據計算
- **歷史日波動率**：基於過去數據計算

#### 模擬結果

##### 預期績效
- **預期最終淨值（平均）**：63.4247
- **預期最終淨值（中位數）**：61.2580
- **標準差**：16.0224
- **預期報酬率**：**49.48%**

##### 置信區間
- **95% 置信區間**：[38.1990, 100.5771]
- **99% 置信區間**：[32.3154, 115.9617]

##### 風險評估 (VaR & CVaR)

**VaR (Value at Risk) - 在給定信心水準下的最大損失**
- **VaR (95%)**：41.0842（損失：-3.17%）
  - 意義：95% 的機率下，損失不會超過 3.17%
- **VaR (99%)**：34.4665（損失：-18.77%）
  - 意義：99% 的機率下，損失不會超過 18.77%

**CVaR (Conditional VaR) - 超過 VaR 的平均損失**
- **CVaR (95%)**：37.2092（平均損失：-12.30%）
  - 意義：在最壞的 5% 情況下，平均損失為 12.30%
- **CVaR (99%)**：31.7999（平均損失：-25.05%）
  - 意義：在最壞的 1% 情況下，平均損失為 25.05%

## 視覺化分析

程式自動生成 `monte_carlo_simulation.png`，包含四個分析圖表：

1. **模擬路徑圖（左上）**
   - 顯示 100 條隨機模擬路徑
   - 紅色線代表所有模擬的平均路徑
   - 綠色虛線為起始淨值

2. **最終淨值分布直方圖（右上）**
   - 顯示 10,000 次模擬的最終淨值分布
   - 紅色虛線：平均值
   - 橘色虛線：中位數
   - 綠色虛線：起始值

3. **百分位數分布與 VaR（左下）**
   - 顯示所有百分位數對應的淨值
   - 紅色區域：VaR 95% 風險區
   - 深紅色區域：VaR 99% 風險區

4. **預期報酬率分布（右下）**
   - 顯示報酬率的機率分布
   - 標示平均報酬率和損益兩平點
   - 顯示不同信心水準下的風險值

## 使用方法

### 環境需求
- Python 3.x
- Conda 環境：`delen`

### 安裝相依套件
```bash
conda activate delen
pip install pandas numpy yfinance requests matplotlib
```

### 執行程式
```bash
conda activate delen
python index.py
```

## 技術細節

### 蒙地卡羅模擬公式
使用幾何布朗運動模型：

```
S(t+1) = S(t) × exp((μ - σ²/2)Δt + σ√Δt × Z)
```

其中：
- `S(t)` = 時間 t 的淨值
- `μ` = 日均報酬率（drift）
- `σ` = 日波動率（volatility）
- `Δt` = 時間間隔（1 天）
- `Z` = 標準常態分佈隨機變數

### 風險指標公式

**Sharpe Ratio**
```
Sharpe = (年化報酬率 - 無風險利率) / 年化標準差
```

**Beta**
```
Beta = Cov(基金報酬, 市場報酬) / Var(市場報酬)
```

**Max Drawdown**
```
MDD = min((NAV - 歷史最高NAV) / 歷史最高NAV)
```

**Sortino Ratio**
```
Sortino = (年化報酬率 - 無風險利率) / 下行標準差
```

## 投資建議參考

### 優勢
- **高 Sharpe Ratio (1.56)**：風險調整後報酬表現良好
- **低 Beta (0.55)**：波動性較市場低，相對穩定
- **高 Sortino Ratio (2.16)**：下行風險控制良好
- **高預期報酬 (49.48%)**：未來一年預期報酬可觀

### 風險提示
- **最大回撤達 20.54%**：歷史曾出現較大跌幅
- **極端情況損失可能達 25%**：CVaR 99% 顯示極端市況下的潛在損失
- **模擬基於歷史數據**：未來實際表現可能與模擬結果有差異

### 適合投資人
- 風險承受度：中高
- 投資期間：建議 1 年以上
- 投資目標：追求較高報酬並能承受適度波動

## 免責聲明

本分析僅供參考，不構成投資建議。投資有風險，過去績效不代表未來表現。蒙地卡羅模擬結果基於歷史數據與統計假設，實際市場狀況可能與模擬結果有顯著差異。投資前請審慎評估自身風險承受能力，必要時諮詢專業財務顧問。

---

**分析日期**：2025-11-22
**分析工具**：Python (pandas, numpy, yfinance, matplotlib)
**資料來源**：復華投信 API、Yahoo Finance
